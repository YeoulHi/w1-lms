# Spec-002-001: 코스 수강신청 프론트엔드 통합 로그

## 1. 개요

- **목적**: Spec-002 "코스 수강신청" 기능의 프론트엔드 UI 및 사용자 플로우 통합
- **기간**: 2025-10-05

## 2. 완료된 작업

### 2.1. 테스트 데이터 생성 (Supabase)
- 기존 `learner` 계정의 역할을 `instructor`로 변경.
- `published` 상태의 테스트용 코스 2개 생성:
  - `4d4afc25-454c-4ba6-be57-4edab32f9049`: Next.js 15 마스터 클래스
  - `ba742c67-4461-4499-a143-2113e459747e`: TypeScript 심화 과정

### 2.2. 코스 상세 페이지 구현
- **경로**: `src/app/(protected)/courses/[id]/page.tsx`
- Client Component (`'use client'`)로 구현.
- `use(useParams())` 훅을 사용하여 비동기적으로 전달된 `params` 처리.
- `EnrollButton` 컴포넌트를 페이지에 통합.
- **최소 복잡도 원칙**: 실제 코스 데이터 API를 호출하는 대신 Mock 데이터를 사용하여 코스 정보를 표시.

### 2.3. Dashboard 페이지 개선
- **경로**: `src/app/(protected)/dashboard/page.tsx`
- "수강 가능한 코스" 섹션을 신규 추가.
- Mock 데이터를 사용하여 `published` 상태의 코스 목록을 표시.
- 각 코스 아이템에 "코스 수강신청" 버튼을 추가하고, `Link` 컴포넌트를 통해 해당 코스의 상세 페이지(`/courses/[id]`)로 네비게이션 기능 구현.

## 3. 최종 사용자 플로우

1. `Learner` 역할의 사용자로 로그인.
2. 대시보드(`/dashboard`)에서 "수강 가능한 코스" 목록을 확인.
3. 특정 코스의 "코스 수강신청" 버튼을 클릭하면 상세 페이지(`/courses/[id]`)로 이동.
4. 코스 상세 페이지에 있는 "수강신청" 버튼을 최종적으로 클릭.
5. `POST /api/enrollments` API가 호출됨.
6. API 호출 성공 시, "수강신청이 완료되었습니다." 토스트 메시지가 화면에 표시됨.

## 4. 기술적 결정사항 및 이슈

### 4.1. 기술적 결정
- **Mock 데이터 사용**: 코스 목록 및 상세 정보 조회를 위한 백엔드 API가 아직 구현되지 않았으므로, 최소 복잡도 원칙에 따라 프론트엔드에 Mock 데이터를 임시로 사용함.

### 4.2. 발견된 이슈 및 해결 과정
1.  **외래 키 제약 조건 위반**:
    - **문제**: `profiles.id`는 `auth.users.id`의 외래 키(Foreign Key)이므로 임의의 UUID를 직접 삽입할 수 없음.
    - **해결**: 테스트 데이터 생성 시, Supabase Auth를 통해 실제 생성된 사용자의 ID를 활용하도록 수정.
2.  **URL 및 포트 문제**:
    - `www.localhost.com`으로 잘못 설정된 URL을 `localhost`로 수정.
    - 기존에 3000번 포트를 사용 중이어서, 개발 서버가 자동으로 3001번 포트로 실행됨.
3.  **기타**:
    - 이미지 로딩(picsum.photos) 타임아웃(504)이 간헐적으로 발생했으나, 핵심 기능 테스트에 영향을 주지 않음.
    - `server-client.ts` 관련 쿠키 에러는 여전히 존재하며, 별도의 작업으로 해결이 필요함을 인지.
