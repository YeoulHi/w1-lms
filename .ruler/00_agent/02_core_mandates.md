<!-- Generated by Ruler -->

<!-- Source: .ruler/AGENTS.md -->

# Senior Developer Guidelines

## Core Project Mandate

- This project prioritizes **implementation practice** of core LMS logic, not building a production-ready app.
- Adhere strictly to the principle of **minimum viable functionality** and **lowest possible complexity** as defined in `docs/goal.md`.
- Explicitly **avoid handling special edge cases**.
- Your primary focus is on correctly implementing role-based access and state-based business rules (e.g., deadlines, submissions, grading).
- Always choose the simplest solution that meets the acceptance criteria.

## Data & Schema

- All development must strictly adhere to the database schema defined in `docs/database.md`.
- This schema, implemented in `supabase/migrations/0002_create_lms_tables.sql`, is the single source of truth for the data model.
- Do not write code that relies on data structures or columns not present in the defined schema.
- Any proposed changes to the schema must be discussed and implemented via a new SQL migration file.

## Core Architecture & Libraries

```yaml
libraries:
  date-fns: "For efficient date and time handling."
  ts-pattern: "For clean and type-safe branching logic."
  '@tanstack/react-query': "For server state management."
  zustand: "For lightweight global state management."
  react-use: "For commonly needed React hooks."
  'es-toolkit': "For robust utility functions."
  'lucide-react': "For customizable icons."
  zod: "For schema validation and data integrity."
  'shadcn-ui': "For pre-built accessible UI components."
  tailwindcss: "For utility-first CSS styling."
  supabase: "For a backend-as-a-service solution."
  'react-hook-form': "For form validation and state management."

directory_structure:
  - src:
    - app: "Next.js App Routers"
      - "api/[[...hono]]": "Hono entrypoint delegated to Next.js Route Handler"
    - backend:
      - hono: "Hono app body (app.ts, context.ts)"
      - middleware: "Common middleware (error, context, Supabase, etc.)"
      - http: "Common HTTP layer (response format, handler utils)"
      - supabase: "Supabase client and config wrappers"
      - config: "Environment variable parsing and caching"
    - features:
      - "[featureName]":
        - "backend/route.ts": "Hono router definition"
        - "backend/service.ts": "Supabase/business logic"
        - "backend/schema.ts": "Request/response Zod schemas"
        - "components/*": "Components for specific feature"
        - "hooks/*": "Hooks for specific feature"
        - "lib/*": "Client-side DTO re-export, etc."
  - supabase:
    - migrations: "Supabase SQL migration files"
```

## 핵심 개발 워크플로우 (Logic)

```
FUNCTION create_feature(featureName):
  → CREATE_DIR `src/features/{featureName}`

  → // Backend
  → CREATE_FILE `backend/schema.ts`:
    - Define request/response Zod schemas.
  → CREATE_FILE `backend/service.ts`:
    - Implement business logic requiring DB access.
    - On rule violation, return failure(4xx, code, message).
  → CREATE_FILE `backend/route.ts`:
    - Validate request with schema.
    - Call service and respond with result.
  → UPDATE_FILE `src/backend/hono/app.ts`:
    - Register new feature route.

  → // Frontend
  → CREATE_FILE `hooks/use{Action}.ts`:
    - Implement `useMutation` for POST/PUT/DELETE.
    - `onSuccess`: show toast with success message.
    - `onError`: show toast with API error message.
  → CREATE_FILE `components/{Component}.tsx`:
    - Use the hook for logic.
    - Handle `isPending` state for UI feedback.

  → // API Call
  → ENSURE all FE->BE calls use `api-client`.
```

## Must

- always use client component for all components. (use `use client` directive)
- always use promise for page.tsx params props.
- use valid picsum.photos stock image for placeholder image
- route feature hooks' HTTP requests through `@/lib/remote/api-client`.
